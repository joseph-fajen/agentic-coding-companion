---
course: Dynamous Agentic Coding
module: 5
lesson: "5.4"
title: "Perfecting Our Layer One Planning"
type: lecture
status: raw
date_added: 2026-02-18
date_modified: 2026-02-18
tags:
  - dynamous
  - agentic-coding
  - module-5-planning-system
  - layer-1-planning
  - refinement
key_concepts: []
prerequisites: ["5.2", "5.3"]
related_lessons: ["5.5"]
---


Okay. So our template is set up and we have

00:02

our PRD outlining the scope of work for our Obsidian

00:06

agent. So now it is time to bring in all

00:08

of the other layer 1 planning that we did in

00:10

the last couple of modules

00:12

and then get into the first PIV loop, building our

00:15

Obsidian AI agent from the ground up, only starting with

00:19

the template that we have right here. And so the

00:21

way that this is going to work is this is

00:24

module 5 5, systems for planning. So I will be

00:26

doing the entire PIV loop a couple of times in

00:29

the next 2 videos here, but I'm gonna be focusing

00:32

just on the planning part of it. So the execute

00:35

command is gonna be really basic. We're not gonna do

00:37

much with validation yet. We're gonna focus on planning. Then

00:40

in the next module, we do the PIV loop a

00:42

couple of more times of focusing on the implementation. And

00:45

then module 7, same thing, but focusing on a validation.

00:49

And I specifically want to do the PIV loop quite

00:51

a few times over the next few modules to show

00:54

you that we really do take

00:56

granular features from our PRD

00:59

implementing just a little bit at a time with the

01:01

PIV loop. That's how we get reliable results with our

01:04

coding assistant and also gives us more iterations to evolve

01:08

our systems. We can go back and correct our commands,

01:10

add on to our rules. That's what I wanna demonstrate

01:13

for you and everything that we're doing here. So for

01:15

the layer 1 planning, we already have everything created. We

01:18

have our PRD that we created very recently. We have

01:21

our rules and our on demand context and our commands

01:24

we created in the last couple of modules. And so

01:26

now really all I need to do right now is

01:28

spend a couple minutes organizing everything

01:30

before we get into the layer 2 planning and the

01:32

PIV loop for building up our agent from scratch. And

01:35

the way that you organize things can look however you

01:39

want. Typically, what I do is I will create a

01:41

dot agents folder. This is where I'm gonna store all

01:44

of my on demand context, my PRD, things like that.

01:47

So I have a reference folder. This is where I'm

01:49

gonna put my on demand context like I showed in

01:52

the last couple of modules.

01:53

And then also I can move my p r d

01:55

into the dot agents folder. This could go into reference

01:58

as well, like it really is up to you however

02:00

you want to do this. And so to make things

02:03

convenient for you, all of the core commands

02:06

and the layer 1 planning that we did in the

02:08

last couple of modules, I have it all combined together

02:11

into the folder for this video that I'll link to

02:13

below. And so very first thing, let's go ahead and

02:16

take all of our commands here for we got, you

02:19

know, priming, planning, executing,

02:21

and committing. So I will copy these,

02:24

go back over, and then put these into my commands

02:26

folder and paste them here. I already have commit so

02:28

I'll just delete this 1

02:30

and there we go. We have all of our core

02:32

commands. And if you're not using cloud code, you could

02:35

just put it in the dot agents slash commands folder.

02:37

You could make a folder there as just a way

02:40

to organize things even when you don't have to have

02:42

a specific folder for your commands like you do with

02:45

cloud code. So there we go. There's everything that we

02:48

cover in module 4 and we're ready to dive into

02:51

planning with these commands that we have as our system

02:54

now. And by the way, for the planning command specifically,

02:59

it is only the template that you created as that

03:02

last exercise in module 4. So super basic right now

03:05

so you can already customize this plan template command

03:09

to what you did in the exercise. Very, very neat.

03:12

And then for the exercise in this module later, it'll

03:15

be up to you to add on to this planning

03:17

command for a whole research flow you want the agent

03:20

to go through before it fills out the template. That's

03:23

what I have for the primary planning command that you

03:26

saw in the last module, but I want this to

03:28

be an exercise for you. So we're starting very simple

03:30

with our planning template and then turning this into a

03:33

full fledged planning command as an exercise for you.

03:37

So very cool. Stay tuned for that. Next step, we

03:39

have all of our on demand context that we created

03:42

recently. So we have our tool guide that we covered

03:45

last couple of modules. We have the MVP tool designs

03:48

that we made along with our PRD. So I'm gonna

03:50

copy that, put that into the reference folder right here.

03:54

And then another thing, not only can you include

03:57

documents you create with the coding assistant as your on

04:00

demand context, but you can also take articles from the

04:04

Internet. For example,

04:05

Rasmus has written this article

04:07

on what he calls the vertical slice architecture. It's just

04:11

a way to organize code bases that is very optimal

04:14

for working with AI coding assistance.

04:16

And so you don't have to understand this entire article.

04:19

I mean, it'd be nice to read if you're interested,

04:21

but we're going to treat this as sort of like

04:23

this thing that we pulled off the Internet that we

04:25

want to include as on demand context for our coding

04:28

assistant. So just giving a demonstration of that. So I'll

04:31

copy this,

04:32

put it into references

04:34

along with the other things that we created with the

04:36

help of our coding assistant. So there we go. We

04:39

got our references.

04:40

We have our commands. The only other thing we need

04:43

is the global rules that we created for the Obsidian

04:46

agent,

04:47

when we were going through module 3. So I'm gonna

04:49

paste this in as well. Now there is a little

04:52

bit of an issue here and you're gonna run into

04:55

this when you're working with templates like this. We already

04:58

have global rules

04:59

for the template, the fast API and PostgreSQL

05:02

template. So now wait a second. How does that work?

05:05

Because we're bringing in our Obsidian rules as well. We

05:08

need to kind of reconcile and combine these 2 things

05:12

together. So right now, I'm going to rename this to

05:15

Claude

05:17

Obsidian

05:18

agent. So we know that it's the rules for the

05:20

Obsidian agent in particular. And then also if this was

05:22

your agents dot m d, you'd just be like, you

05:24

know, agent Obsidian agent dot m d. Whatever it has

05:26

to be, we now now need to work with the

05:28

AI coding assistant to combine these 2 things together.

05:32

And if you're not starting with a template, you don't

05:34

even have to worry about this. Right? Like you could

05:36

just take the first global rules that you made like

05:38

these ones and then just go with that. That's the

05:41

global rules to start your project. We just have to

05:43

do this because we are using a template.

05:46

And also, remember I told you that we can use

05:48

our PRD

05:49

to help

05:50

us define these global rules as well. And so even

05:53

if you didn't have what we created in module 3,

05:56

you could take the global rules from the template,

05:59

tell the AI coding assistant to look at the PRD

06:01

and figure out things to add or update in the

06:04

template rules to make it specific now to the project

06:07

that we are building based on the scope of work

06:09

that we have defined. I know it might seem a

06:12

little random what I'm doing here, but the main point

06:14

that I want to drive home that I'm demoing for

06:17

you in just a second is that when we're bringing

06:19

in all of our layer 1 planning that we did

06:22

throughout different stages, it's important to make sure that there

06:24

are no contradictions

06:26

because we create our

06:28

PRD

06:29

and then we have our global rules, which maybe we

06:31

use the PRD to make the global rules. That's a

06:34

a good thing to do, but maybe we didn't. We

06:36

have our on demand context that we created. We're pulling

06:39

in articles from the Internet like this 1 on the

06:41

vertical slice architecture.

06:42

We need to make sure there are no contradictions using

06:45

the AI coding assistant

06:47

to help us inspect all these things. Otherwise, it's a

06:50

lot for us to do manually. And then we just

06:52

need to reconcile

06:53

if there are any contradictions. We need all of our

06:57

layer 1 planning

06:58

to work extremely well together. Any inconsistencies

07:01

here is going to lead to a mess once we

07:04

get down to layer 2 planning and beyond for the

07:07

implementation.

07:07

And so I'm gonna go into Aquavoice here just speech

07:10

to text really quick, talk about what we've got here

07:13

and then I'm gonna have it reconcile everything.

07:16

So watch this.

07:18

So I've got 2 global rule files in my root

07:20

directory. I have claud dot m d and then also

07:22

claud dash obsidian dash agent dot m d. I want

07:25

you to read both of these. I need to combine

07:28

these global rules together because 1 of them is for

07:31

the template which you can read the read me to

07:33

understand the template and then the other 1 is for

07:35

the obsidian agent specifically which you can look in dot

07:39

agents slash p r d dot m d to read

07:42

up on the scope for our Obsidian agent. And so

07:45

I need you

07:46

to think through, I need you to ultra think through

07:49

how we can combine these 2 global rule files together

07:52

while still keeping it really concise. I don't want to

07:54

actually expand

07:56

the number of lines of our main cloud dot MD.

07:58

So we're just need to needing to consolidate some things

08:01

here.

08:02

And then also, I want you to analyze the PRD

08:05

that I referenced and make sure that all of the

08:08

tech stack and architecture decisions and everything there is aligned

08:11

with our current global rules after we do that consolidation.

08:15

Boom. Go ahead and send that in. And for your

08:18

project, it might look very different what it looks like

08:20

to analyze these files, but it's just the general idea

08:22

that I'm trying to drive home is it's important to

08:24

do this before we get to layer 2 planning. So

08:26

alright. I'll send this in and I'll come back once

08:29

it is done. Alright. Our coding assistant has finished. It

08:32

now says that I can delete my old global rules

08:35

because it has consolidated everything into a single file, which,

08:38

of course, you should validate. But, yeah, taking a look

08:41

at this, we have our core sections. Like, literally everything

08:44

is structured the same way as the global rules we

08:46

created in module 3. So we're not deviating from that.

08:49

We're just combining things with the rules that we have

08:51

in our template. So we have our core principles, project

08:54

overview,

08:55

essential commands for development, testing, linting, database migrations, Dockers, combining

09:00

ideas from the Pydantic AI agent we wanna create through

09:02

our PRD and the rules that we had in our

09:05

template.

09:06

The architecture,

09:07

we have our logging and documentation style, like all this

09:11

should look very familiar to you if you went through

09:13

all of module 3. And so, yes, I'm definitely good

09:15

to go ahead and delete the old rules now. And

09:19

so that is it for our layer 1 planning. Like,

09:22

it took a while to get there. We had a

09:24

whole video on creating the PRD. We had a whole

09:27

module on global rules because that takes a lot of

09:29

emphasis in creating our on demand context. But now we

09:32

are ready to get into the implementation. And the reason

09:35

we spend so much time with the planning

09:38

is because when we take care of this and we

09:41

do it in a lot of detail, once you get

09:42

to the implementation,

09:44

it is a piece of cake. A solid foundation leads

09:47

to not as much work to plan and implement each

09:50

individual feature. So before we get into planning in the

09:52

first pivot loop, let me just sum it up for

09:54

you very quickly here. So I'm gonna go over, just

09:57

write a little note in here. So for

09:59

new projects, like we're doing right here, greenfield projects, you

10:02

will create your PRD first, and then you will use

10:05

that to create your global rules and on demand context.

10:09

Right? So I didn't show this in module 3 because

10:12

I wanted to talk about global rules as to how

10:14

it applies to both existing projects and new projects. And

10:17

so that's why I did the PRD later on in

10:21

this module. But I always recommend doing it this way.

10:23

PRD that helps you with the ideas to create your

10:26

the rest of your layer 1 planning, and then you

10:28

will validate everything because also your on demand context can

10:32

include things that you're bringing in from the Internet. You

10:34

just wanna make sure that all of this is very

10:36

aligned before you ever get into layer 2 planning.

10:40

And then for existing projects,

10:42

it is going to be analyze the code base

10:46

and then global rules

10:48

and on demand context. And then, of course,

10:52

validating everything. Right? So it's a slightly different approach here

10:55

where you don't really need to create a PRD. If

10:58

you're working on an existing code base, hopefully, you already

11:00

have 1. And so you don't need the coding assistant

11:02

to help with that and then use that to create

11:04

the rules. It's just gonna be analyzing the code base,

11:06

maybe a PRD that's already in there as well, and

11:09

then using that to create your rules and on demand

11:11

context. So this is more like the flow that we

11:13

covered in module 3. This is the same thing, but

11:16

just creating the PRD first. So I hope that makes

11:19

it very clear for you what your process should look

11:21

like. And along the way, just asking the coding assistant

11:24

all the questions you need. Because again, the planning is

11:27

all about just getting on the same page with your

11:29

coding assistant for everything about your projects, your architecture, your

11:33

tech stack, the features that you're going to implement, how

11:36

you're adding tools in your agent for example, like 1

11:38

of the pieces of on demand context that we created.

11:41

Get on the same page. Now let's get on it

11:43

to layer 2 planning.